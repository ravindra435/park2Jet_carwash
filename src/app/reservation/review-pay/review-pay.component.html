<!-- <div class="user-title">User Details</div> -->
<div style="width: 73%; margin: 0 auto">
  <div class="user-content">
    <div class="user-card p-4 pt-0 row" style="width: 100%">
      <h3 style="color: red; font-size: 20px">Review</h3>
      <hr style="color: red; border-bottom: 2px solid red; opacity: inherit" />
      <p>
        Please review your reservation details on the right side or below this
        form before proceeding. If you need to adjust any information, please
        use the above navigation to return to a prior step. Card Details
      </p>

      <div class="col-md-7 col-sm-7">
        <h3 style="color: red; font-size: 20px">Card Details</h3>
        <hr
          style="color: red; border-bottom: 2px solid red; opacity: inherit"
        />
        <form
          [formGroup]="cardDetailsForm"
          class="checkout"
          (ngSubmit)="createStripeToken()"
        >
          <div class="card-style">
            <!-- Card Name -->
            <div class="row">
              <div class="col-md-5 col-sm-5">
                <label> Name on Card </label>
              </div>

              <div class="col-md-7 col-sm-7 relative">
                <input
                  type="text"
                  class="form-control input_box"
                  formControlName="nameOnCard"
                  placeholder="Enter Name"
                  [ngClass]="{ 'is-invalid': submitted && f.nameOnCard.errors }"
                  required
                />
                <span class="required">*</span>
              </div>

              <div
                *ngIf="submitted && f.nameOnCard.errors"
                class="invalid-feedback"
              >
                <div *ngIf="submitted && f.nameOnCard.errors.required">
                  card name is required
                </div>
              </div>
            </div>
            <!-- Card Number -->
            <div class="row mt-2">
              <div class="col-md-5 col-sm-5">
                <label> Card Number </label>
              </div>

              <div class="col-md-7 col-sm-7 relative">
                <div
                  class="customCardStyles"
                  id="card-number"
                  #cardNumber
                ></div>
                <span class="required">*</span>
              </div>
            </div>
            <!-- Card Expiry Date & Year -->

            <div class="row">
              <div class="col-md-5 col-sm-5">
                <label>Card Expiry Date & Year </label>
              </div>

              <div class="col-md-7 col-sm-7 relative">
                <div
                  class="customCardStyles"
                  id="card-expiry"
                  #cardExpiry
                ></div>
                <span class="required">*</span>
              </div>
            </div>
            <!-- Card CVC -->
            <div class="row">
              <div class="col-md-5 col-sm-5">
                <label>Card CVC </label>
              </div>

              <div class="col-md-7 col-sm-7 relative">
                <div class="customCardStyles" id="card-cvc" #cardCvc></div>
                <span class="required">*</span>
              </div>
            </div>
            <!-- Zip Code -->
            <div class="row">
              <div class="col-md-5 col-sm-5">
                <label>Zip Code </label>
              </div>

              <div class="col-md-7 col-sm-7 relative">
                <div class="customCardStyles" id="postalCode" #postalCode></div>
                <span class="required">*</span>
              </div>
            </div>

            <br />
            <br />
            {{ cardError }}

            <div class="col-md-12 resp-col">
              <div class="autorized">
                <p>
                  <b
                    >I authorize Express Car Wash Denver to charge my card for
                    the amount of ${{
                      selectedCarWashType?.totalFee | number: "1.2-2"
                    }}</b
                  >
                </p>
                <p>
                  By clicking "Book Reservation," you agree to our
                  <a>Terms of Service</a>.
                </p>
              </div>
            </div>
            <div style="display: flex; justify-content: center">
              <button
                class="booking-btn mt-2"
                #submitButton
                type="submit"
                id="submit-button"
                [ngClass]="{
                  btnDisabled: !cardDetailsForm.valid || bookReservationDisabled
                }"
                [disabled]="!cardDetailsForm.valid || bookReservationDisabled"
              >
                Book Reservation
              </button>
            </div>
          </div>
        </form>
      </div>
      <div class="col-md-1 col-sm-1"></div>
      <div class="col-md-4 col-sm-4">
        <h4 class="text-center" style="color: red; font-size: 20px">
          CARWASH SUMMERY
        </h4>
        <hr
          style="color: red; border-bottom: 2px solid red; opacity: inherit"
        />
        <div class="reservation-summary p-3">
          <h5><b>Express carwash</b></h5>
          <p>
            Location : 18121 E 81st Ave, <br />
            Commerce City, CO 80022
            <br />
            service@expresscarcaredenver.com
          </p>
          <p>
            <b>Car Wash</b> <br />
            <span>{{ selectedCarWashType.displayName }}</span>
          </p>

          <div class="row">
            <h4 style="color: red">Price Details</h4>
            <div class="col-6 col-sm-6 col-md-6">Car Wash</div>
            <div class="col-6 col-sm-6 col-md-6 text-center">
              <b>${{ selectedCarWashType?.carWashPrice | number: "1.2-2" }}</b>
            </div>
            <div class="col-6 col-sm-6 col-md-6">Taxes</div>
            <div class="col-6 col-sm-6 col-md-6 text-center">
              <b>${{ selectedCarWashType?.tax | number: "1.2-2" }}</b>
            </div>
            <hr />
            <div
              class="col-5 col-sm-5 col-md-5"
              style="font-size: 25px; color: red; font-weight: bold"
            >
              ${{ selectedCarWashType?.totalFee | number: "1.2-2" }}
            </div>
            <div class="col-7 col-sm-7 col-md-7 text-center mt-2">
              <p style="font-size: 15px; font-weight: 600">
                Pay Now $ {{ selectedCarWashType?.totalFee | number: "1.2-2" }}
              </p>
            </div>
            <hr />
          </div>
          <h5 style="color: red">User Details</h5>
          <span>
            {{ personalInfo?.firstName }} {{ personalInfo?.lastName }} </span
          ><br />

          <span>{{ personalInfo?.email }}</span> <br />
          <span>{{ personalInfo.phone }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<ngx-spinner
  bdColor="rgba(51,51,51,0.8)"
  size="medium"
  color="#fff"
  type="ball-scale-multiple"
>
  <p style="font-size: 20px; color: #fff">
    Please wait for Reservation confirmation...
  </p>
</ngx-spinner>
